# 트랜잭션 격리 수준 (Transaction Isolation Levels)

트랜잭션 격리 수준은 동시에 여러 트랜잭션이 실행될 때  
한 트랜잭션이 다른 트랜잭션의 연산에 영향을 받지 않도록 하는 정도를 말합니다.  

낮은 격리 수준은 동시 처리 능력을 높이지만 데이터 일관성 문제를 발생시킬 수 있고,  
높은 격리 수준은 데이터 일관성을 보장하지만 동시 처리 성능이 떨어집니다.

---

## 트랜잭션 격리 수준 종류와 특징

| 격리 수준           | 설명                                                         | 발생 가능한 문제                       |
|-------------------|------------------------------------------------------------|----------------------------------|
| **READ UNCOMMITTED** | 커밋되지 않은 트랜잭션의 변경도 다른 트랜잭션에서 읽을 수 있음           | Dirty Read, Non-Repeatable Read, Phantom Read |
| **READ COMMITTED**    | 커밋 완료된 변경만 읽음. Dirty Read 방지됨                           | Non-Repeatable Read, Phantom Read |
| **REPEATABLE READ**   | 같은 트랜잭션 내에서 같은 레코드 조회 시 항상 동일한 데이터 반환 보장    | Phantom Read                       |
| **SERIALIZABLE**      | 모든 트랜잭션이 순차적으로 실행되는 것처럼 동작. 가장 높은 격리 수준      | 성능 저하 (잠금으로 인한 병목)         |

---

## 데이터 일관성 문제 정의

### 1. Dirty Read (더티 리드)
- 한 트랜잭션이 다른 트랜잭션에서 커밋되지 않은 데이터를 읽는 상황
- 다른 트랜잭션이 롤백되면 읽은 데이터가 무효화되어 데이터 일관성이 깨짐

### 2. Non-Repeatable Read (비반복 읽기)
- 한 트랜잭션이 같은 쿼리를 두 번 실행할 때  
- 중간에 다른 트랜잭션이 데이터를 변경해 결과가 달라지는 현상

### 3. Phantom Read (팬텀 리드)
- 한 트랜잭션이 같은 조건의 쿼리를 두 번 실행할 때  
- 다른 트랜잭션이 중간에 행을 삽입/삭제하여 결과 집합이 달라지는 현상

---

## MySQL 기본 격리 수준

- MySQL InnoDB는 기본적으로 **REPEATABLE READ** 격리 수준을 사용합니다.  
- 이 수준은 Non-Repeatable Read 문제를 막지만, Phantom Read는 완전히 방지하지는 않습니다.

---

## 요약

- 격리 수준이 낮으면 동시성은 좋지만 데이터 무결성 문제가 발생할 수 있음  
- 격리 수준이 높으면 데이터 일관성은 좋지만 성능 저하 가능성 존재  
- 상황에 맞게 적절한 격리 수준을 선택하는 것이 중요

---
